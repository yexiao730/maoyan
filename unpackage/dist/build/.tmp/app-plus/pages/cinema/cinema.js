(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cinema/cinema"],{1221:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cinamal"},[i("view",{staticClass:"search"},[i("view",{staticClass:"cityName",attrs:{eventid:"49a5345c-0"},on:{tap:function(e){t.showCityListView=!0}}},[t._v(t._s(t.cityName)),i("view",{staticClass:"city-entry-arrow"})]),i("view",{staticClass:"searchView"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.txtSearch,expression:"txtSearch"}],staticClass:"txtSearch",attrs:{type:"text",placeholder:"请输入搜索内容",eventid:"49a5345c-1"},domProps:{value:t.txtSearch},on:{input:function(e){e.target.composing||(t.txtSearch=e.target.value)}}})])]),t._m(0),i("scroll-view",{staticStyle:{flex:"1",width:"100%","overflow-y":"auto"},attrs:{"scroll-y":""}},[t.showCityListView?t._e():i("view",{staticClass:"cinemalList"},t._l(t.cinemas,function(e,a){return i("view",{key:a,staticClass:"cinemal-item"},[i("view",{staticClass:"cinemal-name"},[t._v(t._s(e.nm)),i("view",{staticClass:"price"},[i("text",[t._v(t._s(e.sellPrice))]),t._v("元起")])]),i("view",{staticClass:"cinemal-addr"},[i("view",{staticStyle:{flex:"1"}},[t._v(t._s(e.addr))]),i("view",{staticStyle:{width:"150rpx","text-align":"right"}},[t._v(t._s(e.distance))])]),i("view",{staticClass:"label-block"},[1==e.tag.allowRefund?i("view",{staticClass:"allowRefund"},[t._v("退")]):t._e(),1==e.tag.endorse?i("view",{staticClass:"endorse"},[t._v("改签")]):t._e(),1==e.tag.snack?i("view",{staticClass:"snack"},[t._v("小吃")]):t._e(),e.tag.vipTag?i("view",{staticClass:"vipTag"},[t._v("折扣卡")]):t._e(),e.tag.hallType?t._l(e.tag.hallType,function(e,a){return i("view",{key:a,staticClass:"hallType"},[t._v(t._s(e))])}):t._e()],2),e.promotion.cardPromotionTag?i("view",{staticClass:"discount-block"},[i("view",{staticClass:"discount-block-image-view"},[i("image",{attrs:{src:"../../static/img/card.png",mode:"widthFix"}})]),i("view",{staticClass:"discount-block-text"},[t._v(t._s(e.promotion.cardPromotionTag))])]):t._e()])}))]),t.showCityListView?i("city-list-view",{attrs:{cityName:t.cityName,eventid:"49a5345c-2",mpcomid:"49a5345c-1"},on:{chooseCityName:t.chooseCityName}}):t._e()],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"topNav"},[i("view",[t._v("全城"),i("view",{staticClass:"city-entry-arrow"})]),i("view",[t._v("品牌"),i("view",{staticClass:"city-entry-arrow"})]),i("view",[t._v("特色"),i("view",{staticClass:"city-entry-arrow"})])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"417e":function(t,e,i){"use strict";i("78c4");var a=s(i("b0ce")),n=s(i("c561"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(n.default))},"507c":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("cbbe")),n=o(i("66f2")),s=i("2f62"),c=i("c28b"),r=o(i("6720"));function o(t){return t&&t.__esModule?t:{default:t}}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(e){u(t,e,i[e])})}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f={data:function(){return{cityIndex:-1,txtSearch:"",cinemas:[],filtercinemas:{},showCityListView:!1}},computed:l({},(0,s.mapState)(["cityName"])),onLoad:function(t){var e=this,i=new n.default.BMapWX({ak:"f8nCGsELLDD60lnZiZmiI4ByPrtW9Cp0"});i.weather({fail:function(t){console.log(JSON.stringify(t)),e.setCityName("武汉"),e.cityIndex=a.default.findIndex(function(t){return t.nm==e.cityName}),e.getCinemaList()},success:function(t){var i=t.originalData.results[0].currentCity.replace("市","");"全国"==i&&(i="北京"),e.setCityName(i),e.cityIndex=a.default.findIndex(function(t){return t.nm==e.cityName}),e.getCinemaList()}})},onBackPress:function(){if(this.showCityListView)return this.showCityListView=!1,!0},onHide:function(){this.showCityListView=!1},watch:{cityName:function(t){this.$store.dispatch("setCityName",this.cityName)}},methods:l({},(0,s.mapActions)(["setCityName"]),{getCinemaList:function(){var e=this;t.showLoading({title:"正在加载"}),t.request({url:"https://www.softeem.xin/maoyanApi/ajax/cinemaList",method:"get",data:{day:(0,c.fmtDate)(new Date),cityId:a.default[this.cityIndex].id,updateShowDay:!0,limit:20},success:function(t){e.cinemas=t.data.cinemas},complete:function(){t.hideLoading()}})},chooseCityName:function(t){var e=this;this.setCityName(t.nm),this.cityIndex=a.default.findIndex(function(t){return t.nm==e.cityName}),this.showCityListView=!1,this.getCinemaList()}}),components:{cityListView:r.default}};e.default=f}).call(this,i("6e42")["default"])},"52bb":function(t,e,i){"use strict";var a=i("d10d"),n=i.n(a);n.a},c28b:function(t,e,i){"use strict";function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";if("object"===typeof t&&t instanceof Date){var i=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return[i,a,n].join(e)}if("string"===typeof t){t=new Date(t);var s=t.getFullYear(),c=t.getMonth()+1,r=t.getDate();return[s,c,r].join(e)}return""}Object.defineProperty(e,"__esModule",{value:!0}),e.fmtDate=a},c561:function(t,e,i){"use strict";i.r(e);var a=i("1221"),n=i("d866");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("52bb");var c=i("2877"),r=Object(c["a"])(n["default"],a["a"],a["b"],!1,null,"1047d9b6",null);e["default"]=r.exports},d10d:function(t,e,i){},d866:function(t,e,i){"use strict";i.r(e);var a=i("507c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a}},[["417e","common/runtime","common/vendor"]]]);